apiVersion: 2018-10-01
location: westus
name: qcMicro1
properties:
  containers:
  - name: apigatewayc
    properties:
      image: qcshop.azurecr.io/apigateway:latest
      resources:
        requests:
          cpu: 1
          memoryInGb: 1.5
      ports:
      - port: 8000
      environmentVariables:
      - name: ASPNETCORE_ENVIRONMENT
        value: Production
      - name: ASPNETCORE_URLS
        value: http://+:8000
  - name: catalogapic
    properties:
      image: qcshop.azurecr.io/catalogapi:latest
      resources:
        requests:
          cpu: 1
          memoryInGb: 1.5
      ports:
      - port: 7001
      environmentVariables:
      - name: ASPNETCORE_ENVIRONMENT
        value: Production
      - name: ASPNETCORE_URLS
        value: http://+:7001
  - name: nginx-with-ssl
    properties:
      image: nginx
      ports:
      - port: 7000
        protocol: TCP
      - port: 80
        protocol: TCP
      resources:
        requests:
          cpu: 1.0
          memoryInGB: 1.5
      volumeMounts:
      - name: nginx-config
        mountPath: /etc/nginx
  volumes:
  - secret:
      ssl.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQ0VENDQXNrQ0ZHQWVKRDZKSHp3amJrMTQybzNJL0EzUXVwbWlNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1JR3MKTVFzd0NRWURWUVFHRXdKVlV6RUxNQWtHQTFVRUNBd0NWMEV4RWpBUUJnTlZCQWNNQ1ZaaGJtTnZkWFpsY2pFVQpNQklHQTFVRUNnd0xjV010WTJGd2MzUnZibVV4RkRBU0JnTlZCQXNNQzNGakxXTmhjSE4wYjI1bE1Td3dLZ1lEClZRUUREQ054WXkxdGFXTnliekV1ZDJWemRIVnpNaTVoZW5WeVpXTnZiblJoYVc1bGNpNXBiekVpTUNBR0NTcUcKU0liM0RRRUpBUllUYzJ0NWJHRnlMbU55ZFhwQWQzTjFMbVZrZFRBZUZ3MHlNREEwTURZeE56TXlNekphRncweQpNVEEwTURZeE56TXlNekphTUlHc01Rc3dDUVlEVlFRR0V3SlZVekVMTUFrR0ExVUVDQXdDVjBFeEVqQVFCZ05WCkJBY01DVlpoYm1OdmRYWmxjakVVTUJJR0ExVUVDZ3dMY1dNdFkyRndjM1J2Ym1VeEZEQVNCZ05WQkFzTUMzRmoKTFdOaGNITjBiMjVsTVN3d0tnWURWUVFERENOeFl5MXRhV055YnpFdWQyVnpkSFZ6TWk1aGVuVnlaV052Ym5SaAphVzVsY2k1cGJ6RWlNQ0FHQ1NxR1NJYjNEUUVKQVJZVGMydDViR0Z5TG1OeWRYcEFkM04xTG1Wa2RUQ0NBU0l3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFNTXBtNzFueXdQakRXTVlFVkVvdldiaitGbGYKdzF5ZE1hdHdNN2ZzYXRaUjdORnkrUVAvTXplelNCclFlRE02cnFhMjZWaGxRZ2J5NStqbDlIWW1kSXZETStpYwpRRkZJVU11V2dMK0JQaHE0UDMvT2dnUzJ3WTRWRThwOXNncGI5TGUzQmVWeVBHa2wvckd4R1NPcktNdHdPNE91CkRYcUNHcTdESjhwMzNKUURSUHZBbmRvRXNjd1lHMlgrclg4WDJrRTBtSnY5aDNxbzNzNW03RnZQSkNmaUVPU2gKWDVlbjlteVFCOXZ0OXhyMVJqNnNlNTk0QVlGSUhtSlFlQzRYemwvWlJUQVNyaXpqVkwyanFqazYvSkdqSFFiTQpJeHZ2bVdVZkJTNHVWRUhxY0luV2RmUGplODBSN2d6eGo2d0hUMTFnSENHVXU0UDdmVjNGdWp1RUVKOENBd0VBCkFUQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFoWlIwVHN5U2tNTHVEQnMySTJLYkdtVHY3d2xkcjJCUkwrS1AKWDlwR0svNlE5dXBDTnVFSDhoUzNTN3hxWnJjbi90bUpzblJPMjZ0aktnMXk2U2NYaUxPaUpyY0tEc3BmSjN0SQpKNU13Q1BNdDcxWkxmcVZ5YjViQUI2TVVzM2ZWdktuNGkvL3dsL1dVWk51V3JHMmFEODFqWDNscVpteVdEWHZwClFycXFJSVdxN1RXQWMweGM1TVM5M0tvWlgzaURQSm9BcWltR1FYb1JqdWR2aStncGlxbk8vcjkvZG5NRVl5UjgKWURDT010Y0tjWFI3eXk0RmhNNFNabEs0WTNoOTJYQlRCQUdjY1U1eTg2a0xUMHQzQ09vcjM4VUVEV1hJK3JXcwo3d3FEdDVzYlllclowYWk2ZVBaeGppbmt5c29ObllicEpqTnB5TTE2TXBDS3ZJbFJJQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      ssl.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRRERLWnU5WjhzRDR3MWoKR0JGUktMMW00L2haWDhOY25UR3JjRE8zN0dyV1VlelJjdmtEL3pNM3MwZ2EwSGd6T3E2bXR1bFlaVUlHOHVmbwo1ZlIySm5TTHd6UG9uRUJSU0ZETGxvQy9nVDRhdUQ5L3pvSUV0c0dPRlJQS2ZiSUtXL1MzdHdYbGNqeHBKZjZ4CnNSa2pxeWpMY0R1RHJnMTZnaHF1d3lmS2Q5eVVBMFQ3d0ozYUJMSE1HQnRsL3ExL0Y5cEJOSmliL1lkNnFON08KWnV4Ynp5UW40aERrb1YrWHAvWnNrQWZiN2ZjYTlVWStySHVmZUFHQlNCNWlVSGd1Rjg1ZjJVVXdFcTRzNDFTOQpvNm81T3Z5Um94MEd6Q01iNzVsbEh3VXVMbFJCNm5DSjFuWHo0M3ZORWU0TThZK3NCMDlkWUJ3aGxMdUQrMzFkCnhibzdoQkNmQWdNQkFBRUNnZ0VCQUxTcHc5NG1ReTBwOXE2UkRSYlFXK1R2akd0UDF3M1pCcTNwaERieXlFUDIKT3YvNUtzT2tic2xWVVo1ZzlhU1c0aTY2akhDajYrZDYzV3dmMDVtOEo0OXArSmVRYlluUkk5b1RUTVA2NUg3ZgpxUWlySm5rdXBTYmVKQ0FERTltN0htTWpMbllrdGYrd2lJSDlxNFAxWWlKUmx3WmpEVjhuS1lRMmJKTmxPZkJaCktJK0pUWWxpbjdURC9OMjR1dkJiZzJ6QUQ5VGpieEI2UklvR1hnUXh0L3JIZDJGMWRHTEVkNDFPcmFFV3lHUjYKamVmS1NmSHJsL3YvNUVwRmw0TVNERHFWc0NJNGZhTGtHQStUV28wNFJRVTZnKzhUd0czLzhtTGdFcXFORlBhWQpXcloyVitjbzhFQ2swR3l0dk0wUGNRVzV6WXNod2dGUXM5c0Exb3Q4aWlFQ2dZRUE0NXFURVljU05mSWlnZE9jClNYL05BMDlHVXA3bkRwaVQzWGRWeHJPNyt3WVFoSGFyWlRsWXZDb2lCcHhFa2pYMXQyei84RHdEWlRvakRTMlUKT29RMUt2akJ0U3dYeDNUSWduQ3l6QVhYY1ZqVlFuR1F0V3hLcks3UW94MXAzdDZmOVB3YVlOVUp3dVY1Q2FFSQpKMnVYSGRVMi9QZTJGaklWQitBSWlVdnNNenNDZ1lFQTI0TGswQ1g3UmVTQ2g5TTFlVFdRWmRzMjBOaVpXYWhtCjJKT2g3czZDUmRMcHFMK0lSblQxQ04xaVZFc0pScXIwNmdudUdCOWsxbkdjdkgvU0tLbmxSanExc0NjdnY4eWoKajRlVWcrNUdmRzRHVjVTS205ZVQ2TVI1VlQ1VEFHdGpIcjROMlozWHQxaGNFdGxDa2tqdFg5ZWRKanRYbUJkRQoxd2ppYjU5SnVlMENnWUFHNHdOMk1VOFV3TW5ZZ2MybHo2OGxYWDIwUEVpamdXeGY5Qjl0VHJ6dVlJV1piSG5OCkswb0xEMzlPRWVabFFpcTRMUjBsYUx0MWthZkQyMUF6NFJJMnhhWWUxRUczOEVtczRMb1lRRWovamYrTjdoL0IKelpBSTM1VkNpajVNMXhHaCtRclhTVHJ0WWNJaXozT090Y3V4eEdUUWpMSSt3Njh0T05NcFRGbk9Sd0tCZ0UxaQpsOGZKbkF2SHd6eWUrUHNDSnlYQllsRytDbEhSVEhDTm0walZCSmdaQXNhNnZ4QVhxMHEwd1RWMlBvN3JOZXhNCkUrUHRMVjlzTGhWRitwRGJWRGl0K2Q5ZjhUVnNyenlxVDNFelR5WU9vNjI4Y0NFQW51UXdYNVh0b3RWREJtNlEKRWRIbUUyWlBnQ1lrOFpNZ29vNW5OTCtGckJ1eUdGSzJqeDFLeW5NQkFvR0FmazUvVExoMElyOUxrVnE2czhFago5ZnBYSHNtY2NPTXVXMTVINUZ1d1VYbjB0bHFyOFpsNWdVUTl5ZUxhYnNFd0pqMWxXSnhucE1SWUxad1U5dmRFCmFTVFJkY0FvckN6UmhONWFUZitXTmhiaG9vZDlQQXRObnZhWGlFekpqeFFBUzlsMnJTQUNkRTJkYUtEQktndG8KTnJYenZGc2JTdnJTa1dBZUsyZ05qTkE9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
      nginx.conf: IyBuZ2lueCBDb25maWd1cmF0aW9uIEZpbGUKIyBodHRwczovL3dpa2kubmdpbngub3JnL0NvbmZpZ3VyYXRpb24KCiMgUnVuIGFzIGEgbGVzcyBwcml2aWxlZ2VkIHVzZXIgZm9yIHNlY3VyaXR5IHJlYXNvbnMuCnVzZXIgbmdpbng7Cgp3b3JrZXJfcHJvY2Vzc2VzIGF1dG87CgpldmVudHMgewogIHdvcmtlcl9jb25uZWN0aW9ucyAxMDI0Owp9CgpwaWQgICAgICAgIC92YXIvcnVuL25naW54LnBpZDsKCmh0dHAgewoKICAgIHNlcnZlcnsKICAgICAgICBsaXN0ZW4gODA7CiAgICAgICAgc2VydmVyX25hbWUgcWMtbWljcm8xLndlc3R1czIuYXp1cmVjb250YWluZXIuaW87CgogICAgfQoKICAgICNSZWRpcmVjdCB0byBodHRwcywgdXNpbmcgMzA3IGluc3RlYWQgb2YgMzAxIHRvIHByZXNlcnZlIHBvc3QgZGF0YQoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIFs6Ol06NzAwMCBzc2w7CiAgICAgICAgbGlzdGVuIDcwMDAgc3NsOwogICAgICAgIHNlcnZlcl9uYW1lIHFjLW1pY3JvMS53ZXN0dXMyLmF6dXJlY29udGFpbmVyLmlvOwoKICAgICAgICBzZXJ2ZXJfbmFtZSBsb2NhbGhvc3Q7CgogICAgICAgICMgUHJvdGVjdCBhZ2FpbnN0IHRoZSBCRUFTVCBhdHRhY2sgYnkgbm90IHVzaW5nIFNTTHYzIGF0IGFsbC4gSWYgeW91IG5lZWQgdG8gc3VwcG9ydCBvbGRlciBicm93c2VycyAoSUU2KSB5b3UgbWF5IG5lZWQgdG8gYWRkCiAgICAgICAgIyBTU0x2MyB0byB0aGUgbGlzdCBvZiBwcm90b2NvbHMgYmVsb3cuCiAgICAgICAgc3NsX3Byb3RvY29scyAgICAgICAgICAgICAgVExTdjEuMjsKCiAgICAgICAgIyBDaXBoZXJzIHNldCB0byBiZXN0IGFsbG93IHByb3RlY3Rpb24gZnJvbSBCZWFzdCwgd2hpbGUgcHJvdmlkaW5nIGZvcndhcmRpbmcgc2VjcmVjeSwgYXMgZGVmaW5lZCBieSBNb3ppbGxhIC0gaHR0cHM6Ly93aWtpLm1vemlsbGEub3JnL1NlY3VyaXR5L1NlcnZlcl9TaWRlX1RMUyNOZ2lueAogICAgICAgIHNzbF9jaXBoZXJzICAgICAgICAgICAgICAgIEVDREhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1FQ0RTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtRUNEU0EtQUVTMjU2LUdDTS1TSEEzODQ6REhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpESEUtRFNTLUFFUzEyOC1HQ00tU0hBMjU2OmtFREgrQUVTR0NNOkVDREhFLVJTQS1BRVMxMjgtU0hBMjU2OkVDREhFLUVDRFNBLUFFUzEyOC1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1TSEE6RUNESEUtRUNEU0EtQUVTMTI4LVNIQTpFQ0RIRS1SU0EtQUVTMjU2LVNIQTM4NDpFQ0RIRS1FQ0RTQS1BRVMyNTYtU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtU0hBOkVDREhFLUVDRFNBLUFFUzI1Ni1TSEE6REhFLVJTQS1BRVMxMjgtU0hBMjU2OkRIRS1SU0EtQUVTMTI4LVNIQTpESEUtRFNTLUFFUzEyOC1TSEEyNTY6REhFLVJTQS1BRVMyNTYtU0hBMjU2OkRIRS1EU1MtQUVTMjU2LVNIQTpESEUtUlNBLUFFUzI1Ni1TSEE6QUVTMTI4LUdDTS1TSEEyNTY6QUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtUlNBLVJDNC1TSEE6RUNESEUtRUNEU0EtUkM0LVNIQTpBRVMxMjg6QUVTMjU2OlJDNC1TSEE6SElHSDohYU5VTEw6IWVOVUxMOiFFWFBPUlQ6IURFUzohM0RFUzohTUQ1OiFQU0s7CiAgICAgICAgc3NsX3ByZWZlcl9zZXJ2ZXJfY2lwaGVycyAgb247CgogICAgICAgICMgT3B0aW1pemUgU1NMIGJ5IGNhY2hpbmcgc2Vzc2lvbiBwYXJhbWV0ZXJzIGZvciAxMCBtaW51dGVzLiBUaGlzIGN1dHMgZG93biBvbiB0aGUgbnVtYmVyIG9mIGV4cGVuc2l2ZSBTU0wgaGFuZHNoYWtlcy4KICAgICAgICAjIFRoZSBoYW5kc2hha2UgaXMgdGhlIG1vc3QgQ1BVLWludGVuc2l2ZSBvcGVyYXRpb24sIGFuZCBieSBkZWZhdWx0IGl0IGlzIHJlLW5lZ290aWF0ZWQgb24gZXZlcnkgbmV3L3BhcmFsbGVsIGNvbm5lY3Rpb24uCiAgICAgICAgIyBCeSBlbmFibGluZyBhIGNhY2hlIChvZiB0eXBlICJzaGFyZWQgYmV0d2VlbiBhbGwgTmdpbnggd29ya2VycyIpLCB3ZSB0ZWxsIHRoZSBjbGllbnQgdG8gcmUtdXNlIHRoZSBhbHJlYWR5IG5lZ290aWF0ZWQgc3RhdGUuCiAgICAgICAgIyBGdXJ0aGVyIG9wdGltaXphdGlvbiBjYW4gYmUgYWNoaWV2ZWQgYnkgcmFpc2luZyBrZWVwYWxpdmVfdGltZW91dCwgYnV0IHRoYXQgc2hvdWxkbid0IGJlIGRvbmUgdW5sZXNzIHlvdSBzZXJ2ZSBwcmltYXJpbHkgSFRUUFMuCiAgICAgICAgc3NsX3Nlc3Npb25fY2FjaGUgICAgc2hhcmVkOlNTTDoxMG07ICMgYSAxbWIgY2FjaGUgY2FuIGhvbGQgYWJvdXQgNDAwMCBzZXNzaW9ucywgc28gd2UgY2FuIGhvbGQgNDAwMDAgc2Vzc2lvbnMKICAgICAgICBzc2xfc2Vzc2lvbl90aW1lb3V0ICAyNGg7CgoKICAgICAgICAjIFVzZSBhIGhpZ2hlciBrZWVwYWxpdmUgdGltZW91dCB0byByZWR1Y2UgdGhlIG5lZWQgZm9yIHJlcGVhdGVkIGhhbmRzaGFrZXMKICAgICAgICBrZWVwYWxpdmVfdGltZW91dCAzMDA7ICMgdXAgZnJvbSA3NSBzZWNzIGRlZmF1bHQKCiAgICAgICAgIyByZW1lbWJlciB0aGUgY2VydGlmaWNhdGUgZm9yIGEgeWVhciBhbmQgYXV0b21hdGljYWxseSBjb25uZWN0IHRvIEhUVFBTCiAgICAgICAgYWRkX2hlYWRlciBTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5ICdtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWlucyc7CgogICAgICAgIHNzbF9jZXJ0aWZpY2F0ZSAgICAgIC9ldGMvbmdpbngvc3NsLmNydDsKICAgICAgICBzc2xfY2VydGlmaWNhdGVfa2V5ICAvZXRjL25naW54L3NzbC5rZXk7CgogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMDsgIyBUT0RPOiByZXBsYWNlIHBvcnQgaWYgYXBwIGxpc3RlbnMgb24gcG9ydCBvdGhlciB0aGFuIDgwCiAgICAgICAgICAgIAogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gIiI7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcmVtb3RlX2FkZHI7CiAgICAgICAgfQoKICAgIH0KfQ==
    name: nginx-config
  imageRegistryCredentials:
  - server: qcshop.azurecr.io
    username: qcshop
    password: hB6KA/uH2VLPYEkCZjsfXh4Au4zUz=8b
  osType: Linux
  ipAddress:
    type: Public
    ports:
    - protocol: tcp
      port: '7000'
    - protocol: tcp
      port: '80'
    dnsNameLabel: qc-micro1
tags: null
type: Microsoft.ContainerInstance/containerGroups