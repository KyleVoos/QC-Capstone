apiVersion: 2018-10-01
location: westus
name: qcMicro1
properties:
  containers:
  - name: apigatewayc
    properties:
      image: qcshop.azurecr.io/apigateway:latest
      resources:
        requests:
          cpu: 1
          memoryInGb: 1.5
      ports:
      - port: 8000
      environmentVariables:
      - name: ASPNETCORE_ENVIRONMENT
        value: Production
      - name: ASPNETCORE_URLS
        value: http://+:8000
  - name: catalogapic
    properties:
      image: qcshop.azurecr.io/catalogapi:latest
      resources:
        requests:
          cpu: 1
          memoryInGb: 1.5
      ports:
      - port: 7001
      environmentVariables:
      - name: ASPNETCORE_ENVIRONMENT
        value: Production
      - name: ASPNETCORE_URLS
        value: http://+:7001
  - name: nginx-with-ssl
    properties:
      image: nginx
      ports:
      - port: 7000
        protocol: TCP
      - port: 80
        protocol: TCP
      resources:
        requests:
          cpu: 1.0
          memoryInGB: 1.5
      volumeMounts:
      - name: nginx-config
        mountPath: /etc/nginx
  volumes:
  - secret:
      ssl.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZmRENDQkdTZ0F3SUJBZ0lTQk00UWlWaXFpR2NrNTZoYlpSTUp0aGxkTUEwR0NTcUdTSWIzRFFFQkN3VUEKTUVveEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkZibU55ZVhCME1TTXdJUVlEVlFRRApFeHBNWlhRbmN5QkZibU55ZVhCMElFRjFkR2h2Y21sMGVTQllNekFlRncweU1EQTBNakF4TnpJM01UQmFGdzB5Ck1EQTNNVGt4TnpJM01UQmFNQzR4TERBcUJnTlZCQU1USTNGakxXMXBZM0p2TVM1M1pYTjBkWE15TG1GNmRYSmwKWTI5dWRHRnBibVZ5TG1sdk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBcTUrWApXdFg4dDJ5L2hWVXc4WjNwajl3VXFabnBLUXM1dDV0eWhiWGphR0RyYUpZS09VOVJWenM5MmxpYVIzNFQ2dU5LCm1tUFVOMWpzeHhoaWJ5WkZ3TFV1R2hYb0dhcXdpNlJZY1RhbWdFbC9iVmJPRjRaSjNLK3JUaWdmVGRKaUs3YkYKQ2FUejRPc0lCYXk5Y0V2NTBEVENLZGRieDVmdFR2ZUZud3dvNWlWNSs3Vm9QMXQzNzN5ZEdYOFJHZnY0M3ZMOAp2ZTI1V25wTVp4eWZrMlpRY1Raam5Ba0pPL21kNG4vdXF2czhYRFJxVFhlZDVRdXdRQWxKSDVITjJXODU4T3RzCjA3K0UzamRLd1kzeU9sYjhYWi80WjZielRPMTIwRFhsMmNud2JYTEtLeDVOamh4VTFBa085emNTeW1zWHZMRmQKQnplSzdZSDFHMGhSOWR3cVFRSURBUUFCbzRJQ2RqQ0NBbkl3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZApKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUIwR0ExVWREZ1FXCkJCU3RKZHVodXdtRlBRQmkwVzJ2cmJVdWFuR2Y4VEFmQmdOVkhTTUVHREFXZ0JTb1NtcGpCSDNkdXViUk9iZW0KUldYdjg2anNvVEJ2QmdnckJnRUZCUWNCQVFSak1HRXdMZ1lJS3dZQkJRVUhNQUdHSW1oMGRIQTZMeTl2WTNOdwpMbWx1ZEMxNE15NXNaWFJ6Wlc1amNubHdkQzV2Y21jd0x3WUlLd1lCQlFVSE1BS0dJMmgwZEhBNkx5OWpaWEowCkxtbHVkQzE0TXk1c1pYUnpaVzVqY25sd2RDNXZjbWN2TUM0R0ExVWRFUVFuTUNXQ0kzRmpMVzFwWTNKdk1TNTMKWlhOMGRYTXlMbUY2ZFhKbFkyOXVkR0ZwYm1WeUxtbHZNRXdHQTFVZElBUkZNRU13Q0FZR1o0RU1BUUlCTURjRwpDeXNHQVFRQmd0OFRBUUVCTUNnd0pnWUlLd1lCQlFVSEFnRVdHbWgwZEhBNkx5OWpjSE11YkdWMGMyVnVZM0o1CmNIUXViM0puTUlJQkFnWUtLd1lCQkFIV2VRSUVBZ1NCOHdTQjhBRHVBSFVBYjFOMnJESHdNUm5ZbVFDa1VSWC8KZHhVY0Vka0N3UUFwQm8yeUNKbzMyUk1BQUFGeG1OZ1hEQUFBQkFNQVJqQkVBaUI1SFptcW5Ld2djUSt0TUlWegowcXNUbkphU3lyUzc3dUVvZ1FVTktjMkpCQUlnWjBMY0VXNExRRXBwRzRKZFJFcE9Sa05aK1pOZU9KM3F5elBDCjBETTlCV1VBZFFDeUhnWE1pNkxOaWlCT2gyYjVLN21LSlNCbmE5cjZjT2V5U1ZNdDc0dVFYZ0FBQVhHWTJCYkcKQUFBRUF3QkdNRVFDSURPemNGMjdlaE5Sb0JSMWdXOWJ2aWpsV2QwcGdTVDVDVDFJRDA1aXVxcjNBaUF2eExPSgpuN0JwajFYVzA2ekpSVGtEcDB4NnB5bG51d3MwSUVqR1dhMEtjREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBClVnaGNjSmhBNDJKSmpYZ01HMyt4d0xCT0I2NzdJcVlGbFEvMzIyUkJ4dU9FempkNVB5elp5WHpyVHl0cEpEZEUKdjVmK211WGkzN1RKVXJNTEQwWDk4QzhWbVVkcitnL0diNlc5czBRU2JlNEJZMlkxL3BsV3RUVzRGcUM4ZVZmVQoybm9UUGNndUFnWTR1eWlRR2l3cTBTQ28yb0V2WEllT3JPbXV5VnFTditzQS9sWkZLWDV2aGJleExTYkd2OU1YClN3VW9NelQ5NkhOMG1TNFkwcXRTbE4wN0ROeWp0RWc4ZHhZYmRlcUpXZnA1TG9rWjROQjhLOFdRSDhlNmpYcE8KMDlYUldyNVRWM0Z4NkRWeWR4dEF3WkRnNDNYMjdoRXA2bHdvK1dQY2tVVXBuM21IMVBHZTZUYVNabFIrRFpZZgpCNWJKYUlDVU5Hcm1LSXZRS0E4c2NBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ==
      ssl.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRQ3JuNWRhMWZ5M2JMK0YKVlREeG5lbVAzQlNwbWVrcEN6bTNtM0tGdGVOb1lPdG9sZ281VDFGWE96M2FXSnBIZmhQcTQwcWFZOVEzV096SApHR0p2SmtYQXRTNGFGZWdacXJDTHBGaHhOcWFBU1g5dFZzNFhoa25jcjZ0T0tCOU4wbUlydHNVSnBQUGc2d2dGCnJMMXdTL25RTk1JcDExdkhsKzFPOTRXZkRDam1KWG43dFdnL1czZnZmSjBaZnhFWisvamU4dnk5N2JsYWVreG4KSEorVFpsQnhObU9jQ1FrNytaM2lmKzZxK3p4Y05HcE5kNTNsQzdCQUNVa2ZrYzNaYnpudzYyelR2NFRlTjByQgpqZkk2VnZ4ZG4vaG5wdk5NN1hiUU5lWFp5ZkJ0Y3NvckhrMk9IRlRVQ1E3M054TEtheGU4c1YwSE40cnRnZlViClNGSDEzQ3BCQWdNQkFBRUNnZ0VBU2c2N3lUNjlwb2tPdkFKZTlHUW4vU1FDNW95N3lESkgzYXIrYUNSczFRVzkKajR2dkxYdkVwZGV5Z1IzcXRSNzZpVWs3VUJQejUwNUFIa212Y0RjYnNtUjhXRlZMcW9lMVZ3eTcvVjZQeXB2cwptTW4wZE1KRjdTMEF4dUVaWVFOL3lVMDlDVVJjMkptVEJKL2R2eStKeFFaL0luOEQ0OFR6YWpmMU9RU09RWUVGClNWQkc0MWNDUU5PdGhwWURONXpsY3pmSkkrcXdZcjVEbSthdHZ5cEJVR096WVNzdWZZV0VHUTZ2bWI4Z0F2UysKR0hOcEJUZEpEWjVzNnpUZ25PUEY3UWUxSmlDRDF0czhRRCtUT1J5cC9nVDRZT0dZVjlVZEI5ZktYUzNmWnZnZQprRjBpQ0puVDNOdDhBUWw2SEEwNitVLzBIdkNiM2tPTTZzWFo5WWp0NFFLQmdRRGQyeDN4bGVkQldlSG1YMXkwCkQ3dk5MUlpGdUhlblZ2WXdFVU04dVpjNmZRYnlSbkJJc3Zad1FMUExmcGpBY2Z4MGlEQnplbnU5THpBMFVWeisKMnRxUm1DMmVHVFViTGpKV0lNcU8zUHFPV1lKRDBJc2NCUkVpT0Qxa1dZd1NDMDVjMEZlbHFLOG1QbTh6NDF0QwphaWM0dnZjbWVKNzdwaHdlNmVsMXhsL2dUd0tCZ1FER0NWNElvQTcrWTVUdmFSRFNZVGwyVzMzaElxOEdZS2lmCjVvVmRsWElZaVhlY0tZRzUzY2RGK2tTUVRlMFQxSmhFY1ZURVgyZzFFVGI4UGFSeGp2R2VJTnNMZ2U0d0h0UUwKZXhJbDhvdG12L3E5NFJwUEh1VU1rSXBXUzErNEdqd2hZZzZMdnUvdC83TkVWVmtSM1drYVl6dGIzTlp6eFI4egpId1lJTDNXWWJ3S0JnRnZrS3pYcVdodldaOXZzdWRBWENEbUdxRWYralFqeDJ3eXp5YjY0UEd4TVp2a290YzlXCjJQNUx2bXpXSmR6b0dhSUcydEtwOCtDN1QrTUxwRkluUWdxMkZvYjZkK1duTDlBK3lzZDd2Z2dDQ1JPZnFFN1YKeG0vL0RXYW9OSDB3MDZkYjRFSE1hYWVVaXFqYVRlMW5YSkdEZjRrZXd2TUdyWFVjZThkOWdDNi9Bb0dBS2NOOQo5am16RDhqMmRzcmtoa21Fc2NZM3RNdjR0MUtaSFNlalJvb214cS91N3ByK1JiRlV2aGc2YjJoUHNCZnNpTHFSCjB0d0FBUGtCYkk2ZmFHZHA0eHd3dGF1UURNdmprZ3hCVm9saEJxbEQrdGxIRUJxRzJYQitEQmJYTjk4b2dTM0oKdllUbDJuNUxVd1RneE5pNXVwdmt2OG5CM0NaZEh3M1MydFVQYXJjQ2dZRUF1U1MrQlJKN0toa3BHTlVQU01hVwo4SUd4U0FZMEorTnQxUUlpdzNPQ2ZpRVdGNVBsTWZ5cldkMmlhWUpDSlFWeXZLSnZWS3RRVXlJUU5HLzlsd1ZqCnZqRFl4b1JqR3BSN3NjYWtVcDR2aFVEdVJqREp3K09IMmJsdFJwZFlVeDRWVlVobXFCQ1FhTVFUeEgvUHNHRksKeUJCUVFDeVVvQXp6VzZScWVRQ0htTUk9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0=
      nginx.conf: IyBuZ2lueCBDb25maWd1cmF0aW9uIEZpbGUKIyBodHRwczovL3dpa2kubmdpbngub3JnL0NvbmZpZ3VyYXRpb24KCiMgUnVuIGFzIGEgbGVzcyBwcml2aWxlZ2VkIHVzZXIgZm9yIHNlY3VyaXR5IHJlYXNvbnMuCnVzZXIgbmdpbng7Cgp3b3JrZXJfcHJvY2Vzc2VzIGF1dG87CgpldmVudHMgewogIHdvcmtlcl9jb25uZWN0aW9ucyAxMDI0Owp9CgpwaWQgICAgICAgIC92YXIvcnVuL25naW54LnBpZDsKCmh0dHAgewoKICAgIHNlcnZlcnsKICAgICAgICBsaXN0ZW4gODA7CiAgICAgICAgc2VydmVyX25hbWUgcWMtbWljcm8xLndlc3R1czIuYXp1cmVjb250YWluZXIuaW87CgogICAgfQoKICAgICNSZWRpcmVjdCB0byBodHRwcywgdXNpbmcgMzA3IGluc3RlYWQgb2YgMzAxIHRvIHByZXNlcnZlIHBvc3QgZGF0YQoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIFs6Ol06NzAwMCBzc2w7CiAgICAgICAgbGlzdGVuIDcwMDAgc3NsOwogICAgICAgIHNlcnZlcl9uYW1lIHFjLW1pY3JvMS53ZXN0dXMyLmF6dXJlY29udGFpbmVyLmlvOwoKICAgICAgICBzZXJ2ZXJfbmFtZSBsb2NhbGhvc3Q7CgogICAgICAgICMgUHJvdGVjdCBhZ2FpbnN0IHRoZSBCRUFTVCBhdHRhY2sgYnkgbm90IHVzaW5nIFNTTHYzIGF0IGFsbC4gSWYgeW91IG5lZWQgdG8gc3VwcG9ydCBvbGRlciBicm93c2VycyAoSUU2KSB5b3UgbWF5IG5lZWQgdG8gYWRkCiAgICAgICAgIyBTU0x2MyB0byB0aGUgbGlzdCBvZiBwcm90b2NvbHMgYmVsb3cuCiAgICAgICAgc3NsX3Byb3RvY29scyAgICAgICAgICAgICAgVExTdjEuMjsKCiAgICAgICAgIyBDaXBoZXJzIHNldCB0byBiZXN0IGFsbG93IHByb3RlY3Rpb24gZnJvbSBCZWFzdCwgd2hpbGUgcHJvdmlkaW5nIGZvcndhcmRpbmcgc2VjcmVjeSwgYXMgZGVmaW5lZCBieSBNb3ppbGxhIC0gaHR0cHM6Ly93aWtpLm1vemlsbGEub3JnL1NlY3VyaXR5L1NlcnZlcl9TaWRlX1RMUyNOZ2lueAogICAgICAgIHNzbF9jaXBoZXJzICAgICAgICAgICAgICAgIEVDREhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1FQ0RTQS1BRVMxMjgtR0NNLVNIQTI1NjpFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtRUNEU0EtQUVTMjU2LUdDTS1TSEEzODQ6REhFLVJTQS1BRVMxMjgtR0NNLVNIQTI1NjpESEUtRFNTLUFFUzEyOC1HQ00tU0hBMjU2OmtFREgrQUVTR0NNOkVDREhFLVJTQS1BRVMxMjgtU0hBMjU2OkVDREhFLUVDRFNBLUFFUzEyOC1TSEEyNTY6RUNESEUtUlNBLUFFUzEyOC1TSEE6RUNESEUtRUNEU0EtQUVTMTI4LVNIQTpFQ0RIRS1SU0EtQUVTMjU2LVNIQTM4NDpFQ0RIRS1FQ0RTQS1BRVMyNTYtU0hBMzg0OkVDREhFLVJTQS1BRVMyNTYtU0hBOkVDREhFLUVDRFNBLUFFUzI1Ni1TSEE6REhFLVJTQS1BRVMxMjgtU0hBMjU2OkRIRS1SU0EtQUVTMTI4LVNIQTpESEUtRFNTLUFFUzEyOC1TSEEyNTY6REhFLVJTQS1BRVMyNTYtU0hBMjU2OkRIRS1EU1MtQUVTMjU2LVNIQTpESEUtUlNBLUFFUzI1Ni1TSEE6QUVTMTI4LUdDTS1TSEEyNTY6QUVTMjU2LUdDTS1TSEEzODQ6RUNESEUtUlNBLVJDNC1TSEE6RUNESEUtRUNEU0EtUkM0LVNIQTpBRVMxMjg6QUVTMjU2OlJDNC1TSEE6SElHSDohYU5VTEw6IWVOVUxMOiFFWFBPUlQ6IURFUzohM0RFUzohTUQ1OiFQU0s7CiAgICAgICAgc3NsX3ByZWZlcl9zZXJ2ZXJfY2lwaGVycyAgb247CgogICAgICAgICMgT3B0aW1pemUgU1NMIGJ5IGNhY2hpbmcgc2Vzc2lvbiBwYXJhbWV0ZXJzIGZvciAxMCBtaW51dGVzLiBUaGlzIGN1dHMgZG93biBvbiB0aGUgbnVtYmVyIG9mIGV4cGVuc2l2ZSBTU0wgaGFuZHNoYWtlcy4KICAgICAgICAjIFRoZSBoYW5kc2hha2UgaXMgdGhlIG1vc3QgQ1BVLWludGVuc2l2ZSBvcGVyYXRpb24sIGFuZCBieSBkZWZhdWx0IGl0IGlzIHJlLW5lZ290aWF0ZWQgb24gZXZlcnkgbmV3L3BhcmFsbGVsIGNvbm5lY3Rpb24uCiAgICAgICAgIyBCeSBlbmFibGluZyBhIGNhY2hlIChvZiB0eXBlICJzaGFyZWQgYmV0d2VlbiBhbGwgTmdpbnggd29ya2VycyIpLCB3ZSB0ZWxsIHRoZSBjbGllbnQgdG8gcmUtdXNlIHRoZSBhbHJlYWR5IG5lZ290aWF0ZWQgc3RhdGUuCiAgICAgICAgIyBGdXJ0aGVyIG9wdGltaXphdGlvbiBjYW4gYmUgYWNoaWV2ZWQgYnkgcmFpc2luZyBrZWVwYWxpdmVfdGltZW91dCwgYnV0IHRoYXQgc2hvdWxkbid0IGJlIGRvbmUgdW5sZXNzIHlvdSBzZXJ2ZSBwcmltYXJpbHkgSFRUUFMuCiAgICAgICAgc3NsX3Nlc3Npb25fY2FjaGUgICAgc2hhcmVkOlNTTDoxMG07ICMgYSAxbWIgY2FjaGUgY2FuIGhvbGQgYWJvdXQgNDAwMCBzZXNzaW9ucywgc28gd2UgY2FuIGhvbGQgNDAwMDAgc2Vzc2lvbnMKICAgICAgICBzc2xfc2Vzc2lvbl90aW1lb3V0ICAyNGg7CgoKICAgICAgICAjIFVzZSBhIGhpZ2hlciBrZWVwYWxpdmUgdGltZW91dCB0byByZWR1Y2UgdGhlIG5lZWQgZm9yIHJlcGVhdGVkIGhhbmRzaGFrZXMKICAgICAgICBrZWVwYWxpdmVfdGltZW91dCAzMDA7ICMgdXAgZnJvbSA3NSBzZWNzIGRlZmF1bHQKCiAgICAgICAgIyByZW1lbWJlciB0aGUgY2VydGlmaWNhdGUgZm9yIGEgeWVhciBhbmQgYXV0b21hdGljYWxseSBjb25uZWN0IHRvIEhUVFBTCiAgICAgICAgYWRkX2hlYWRlciBTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5ICdtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWlucyc7CgogICAgICAgIHNzbF9jZXJ0aWZpY2F0ZSAgICAgIC9ldGMvbmdpbngvc3NsLmNydDsKICAgICAgICBzc2xfY2VydGlmaWNhdGVfa2V5ICAvZXRjL25naW54L3NzbC5rZXk7CgogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMDsgIyBUT0RPOiByZXBsYWNlIHBvcnQgaWYgYXBwIGxpc3RlbnMgb24gcG9ydCBvdGhlciB0aGFuIDgwCiAgICAgICAgICAgIAogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gIiI7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcmVtb3RlX2FkZHI7CiAgICAgICAgfQoKICAgIH0KfQ==
    name: nginx-config
  imageRegistryCredentials:
  - server: qcshop.azurecr.io
    username: qcshop
    password: hB6KA/uH2VLPYEkCZjsfXh4Au4zUz=8b
  osType: Linux
  ipAddress:
    type: Public
    ports:
    - protocol: tcp
      port: '7000'
    - protocol: tcp
      port: '80'
    dnsNameLabel: qc-micro1
tags: null
type: Microsoft.ContainerInstance/containerGroups